1
00:00:08,230 --> 00:00:09,370
Приветствую.

2
00:00:09,400 --> 00:00:12,640
В этой лекции мы добавим небо в наш уровень.

3
00:00:13,000 --> 00:00:17,080
Для этого мы добавим несколько различных объектов.

4
00:00:17,080 --> 00:00:21,430
Так же мы поговорим о том, для чего нужен тот или иной тип объекта.

5
00:00:21,790 --> 00:00:32,020
Нам нужна атмосфера, направленный свет, небесный свет, экспоненциальная высота и объемные облака.

6
00:00:32,500 -->00:00:40,180
Все это создает небо. Каждый их них играет свою роль в формировании мира.

7
00:00:40,870 --> 00:00:43,000
Для начала поговорим об атмосфере.

8
00:00:43,330 --> 00:00:46,210
В Unreal Engine есть атмосфера неба.

9
00:00:46,300 --> 00:00:54,460
Небесная атмосфера рассеивает свет как настоящая атмосфера.

10
00:00:54,640 --> 00:01:00,820
Так что если у нас есть свет, то она будет рассеивать его и применять 

11
00:01:00,820 --> 00:01:04,870
эффеты, делающие наше небо как при закате или рассвете.

12
00:01:04,870 --> 00:01:06,400
Скоро мы увидим это.

13
00:01:06,730 --> 00:01:09,650
Так же мы можем иметь до двух атмосферных огней.

14
00:01:09,670 --> 00:01:12,790
То есть, можно иметь до двух источников света.

15
00:01:12,790 --> 00:01:18,880
У нас есть один источник света, имитирующий солнце. Но у нас может быть второй, для имитации луны или второго солнца.

16
00:01:18,910 --> 00:01:23,230
Атмосфера тесно взаимодействует с направленным светом.

17
00:01:23,260 --> 00:01:27,790
Направленный свет имитирует источник света, который находится в бесконечном от нас расстоянии.

18
00:01:27,820 --> 00:01:33,040
То есть, все тени отбрасываемые на объекты, параллельны друг другу.

19
00:01:33,160 --> 00:01:37,250
Для имитации солнца используем направленный источник света.

20
00:01:37,270 --> 00:01:41,410
Давайте посмотрим как атмосфера и направленный свет работают вместе.

21
00:01:41,890 --> 00:01:47,470
Я открыл уровень. Я открыл резервную копию этого обычного уровня.

22
00:01:47,590 --> 00:01:50,200
Ранее мы создали стандартный уровень.

23
00:01:50,230 --> 00:01:53,920
Он называется Slash open world и находится он в папке Maps.

24
00:01:53,950 --> 00:01:56,400
Предположим что мы хотим открыть этот уровень

25
00:01:56,410 --> 00:02:03,160
когда мы открываем Unreal Engine, мы можем это сделать, перейдя в меню "Edit", выбрав настройки проекта.

26
00:02:03,160 --> 00:02:07,450
Здесь мы можем выбрать карту, которую мы хотим открыть при запуске.

27
00:02:07,480 --> 00:02:14,260
Перейдем в раздел "Maps and Modes", в 

28
00:02:14,260 --> 00:02:19,860
разделе карт по умолчанию, меню качества карты в редакторе. Здесь выбран Minimal Default.

29
00:02:19,900 --> 00:02:24,550
Это уровень, редактируемый нами с самого начала курса.

30
00:02:24,550 --> 00:02:31,540
В верху редактора есть вкладка, обозначающая наш уровень, имя которой Minimal Default.

31
00:02:31,660 --> 00:02:41,100
Мы можем выбрать Slash open world. И теперь при кажом запуске Unreal Engine у нас будет открываться этот уровень.

32
00:02:41,110 --> 00:02:46,220
Итак, так же у нас есть игровая карта, но там так же выбрано Minimal Default.

33
00:02:46,240 --> 00:02:53,590
Эта карта открывается когда мы запускаем готовую игру.

34
00:02:53,620 --> 00:02:56,340
В настройках нет кнопки сохранения.

35
00:02:56,350 --> 00:02:59,450
Тут все сохраняется автоматически.

36
00:02:59,470 --> 00:03:01,970
Закроем настройки уровня.

37
00:03:01,990 --> 00:03:05,760
Но сейчас нам все равно придется открыть Slash open world в ручную.

38
00:03:05,770 --> 00:03:07,780
Сейчас я этим и займусь.

39
00:03:07,780 --> 00:03:11,530
Итак, мы снова в нашем совершенно пустом уровне.

40
00:03:11,740 --> 00:03:15,700
Нам нужна атмосфера и направленный свет.

41
00:03:15,730 --> 00:03:22,360
Что бы разместить их на уровне, откроем панель Place Actors, наверху.

42
00:03:22,360 --> 00:03:28,750
Развернем список и выберем Place Actors Panel.

43
00:03:28,750 --> 00:03:35,760 
Здесь есть различные актеры. Обычно они группируются по категориям и помещаются на уровень.

44
00:03:35,770 --> 00:03:41,860
Эта категория базовая. Мы можем перемещаться между категориями, пока то что нужно нам

45
00:03:41,860 --> 00:03:45,420
или можем найти актер в строке поиска.

46
00:03:45,430 --> 00:03:51,400
Я выполню поиск по слову Sky. Есть насколько объектов в которых есть Sky.

47
00:03:51,430 --> 00:03:56,230
Мне нужна атмосфера неба и я могу ее перенести на уровень.

48
00:03:56,230 --> 00:03:58,050
Вот, у нас есть атмосфера.

49
00:03:58,060 --> 00:04:02,830
Сейчас мы ничего не видим, так как без света атмосфера бесполезна.

50
00:04:02,830 --> 00:04:05,380
Для этого нам нужем направленный свет.

51
00:04:05,380 --> 00:04:12,940
Я поищу направленный свет среди остальных актеров и перетащить его в мир.

52
00:04:12,940 --> 00:04:21,280
После того как я перетащу направленный свет в мир, тут появится небо и солнце, являющееся источником света.

53
00:04:21,370 --> 00:04:22,740
Это хорошо.

54
00:04:22,750 --> 00:04:30,760
У нас есть свет и небо благодаря атмосфере, рассеивающей свет

55
00:04:30,760 --> 00:04:34,400
от его источника, практически так же, как и настоящая атмосфера.

56
00:04:34,420 --> 00:04:36,280
Поэтому мы видим небо голубым.

57
00:04:36,280 --> 00:04:43,690
Я упоминал, что у нас может быть до двух источников света, что дает мне перетащить второй направленный свет на уровень.

58
00:04:43,690 --> 00:04:48,370
В планировщике у нас есть два направленных света.

59
00:04:48,400 --> 00:04:53,830
Если они находятся в одном и том же месте, затруднительно будет сказать что их два или больше.

60
00:04:53,830 --> 00:05:00,340
Мы можем переместить первый, удерживая control и l на клавиатуре.

61
00:05:00,430 --> 00:05:06,520
Можно удержвать control и при перемещении мышью, солнце будет двигаться.

62
00:05:06,520 --> 00:05:11,290
Если отпустить control, то солнце перестанет перемещаться мышью.

63
00:05:11,320 --> 00:05:17,560
Мы двигаем оба солнца. Но дело в том что Unreal Engine не знает какое солнце мы хотим переместить.

64
00:05:17,680 --> 00:05:25,280
Если у нас есть более одного источника света, их можно различать, добавляя им индекс.

65
00:05:25,300 --> 00:05:35,620
Выберем первый источник света, и на панели "Детали" есть индекс этого источника света. 

66
00:05:35,650 --> 00:05:45,970
Если мы выберем второй источник света, я бы изменил его индекс на 1.

67
00:05:45,970 --> 00:05:52,750
После того как мы это сделаем, на уровне будет уже два разных солнца, которые мы можем перемещать по отдельности.

68
00:05:52,780 --> 00:05:59,200
Мы уже знаем что с помощью control и L мы можем перемещать солнце. 

69
00:05:59,320 --> 00:06:03,040
Иногда перемещение солнца может заблокироваться.

70
00:06:03,040 --> 00:06:04,840
И сейчас вы это видите.

71
00:06:04,960 --> 00:06:09,410
Я нажимаю control и L, двигаю мышью, но ничего не происходит.

72
00:06:09,430 --> 00:06:17,530
Это называется Gimbal Lock. Unreal Engine еще не исправил данную проблему.

73
00:06:17,530 --> 00:06:21,700
Мы можем решить эту проблему с помощью направленного света.

74
00:06:21,700 --> 00:06:29,520
На панели "Детали", все три значения вращения заменить на ноль.

75
00:06:29,530 --> 00:06:33,550
После этого, наше солнце будет в закате.

76
00:06:33,580 --> 00:06:44,770
Теперь я могу переместить наше второе солнце, индекс которого является 1, удерживая control+shift+L.

77
00:06:44,770 --> 00:06:46,720
Передвинем второй источник света.

78
00:06:46,720 --> 00:06:49,320
Итак, control+shift перемещают первое солнце.

79
00:06:49,320 --> 00:06:52,330
Control+shift+L перемещают второе.

80
00:06:52,360 --> 00:06:55,060
В обоих случаях вам нужно удерживать control.

81
00:06:55,330 --> 00:07:00,010
В случае с первым солнцем control+shift и перемещение мышью.

82
00:07:00,280 --> 00:07:07,090
Если вам не удается переместить солнце, или оно не разблокировалось, то можно в ручную изменить его координаты.
 
83
00:07:07,120 --> 00:07:15,880
Можно ввести значения осей X,Y и Z, либо вы можете щелкнуть по полю ввода, и перетащить вправо, тем самым изменив значение.

84
00:07:16,000 --> 00:07:25,070
Если я таким образом буду изменять Y, то солнце будет перемещаться. А изменение X будет перемещать солнце по горизонтали.

85
00:07:25,120 --> 00:07:29,320
Оно вертится на 360 градусов вокруг нас.

86
00:07:29,620 --> 00:07:31,210
У нас два солнца.

87
00:07:31,330 --> 00:07:36,490
Обращу внимание на кое что для направленного света на панели "Детали",

88
00:07:36,520 --> 00:07:41,110
что находится в разделе Transform.

89
00:07:41,380 --> 00:07:49,330
Здесь есть значение мобильности, и здесь выбранно стационарный режим. Так же тут есть статический и подвижный режим.

90
00:07:49,510 --> 00:07:52,060
Обсудим, что все это значит.

91
00:07:52,360 --> 00:07:58,570
Настройка мобильности света влияет на то, как он ведет себя в игре и что можно с ним сделать.

92
00:07:58,570 --> 00:08:04,810
Если у мобильности выбран статичный режим, то в процессе игры со светом нельзя будет взаимодействовать.

93
00:08:04,810 --> 00:08:12,580
Мы не сможем изменить местоположение или его направаление, интенсивность и цвет.

94
00:08:12,730 --> 00:08:15,700
Статический свет обрабатывается быстрее всего.

95
00:08:15,700 --> 00:08:21,400
Движку не требуется выполнять какие либо вычисления, поскольку свет в игре не изменится.

96
00:08:21,400 --> 00:08:27,610
Так же можно "запечь" освещение, если тень отпрасывается статичным предметом 

97
00:08:27,610 --> 00:08:32,730
и никогдане изменится, то можно забить информацию о тени в сцену.

98
00:08:32,740 --> 00:08:37,440
Это экономит ресурсы, так как расчитывается на стадии разработки, а не в игре.

99
00:08:37,450 --> 00:08:40,240
Второй режим мобильности - стационарный.

100
00:08:40,270 --> 00:08:48,130
Стационарный режим позволяет менять цвет и интенсивность света, но не местоположение и направление.

101
00:08:48,700 --> 00:08:57,310
ТАким образом можно сделать частичное "запеченное освещение". То есть свет падающий на статичные объекты можно "запечь"

102
00:08:57,310 --> 00:09:01,580
Динамическим объектам нужны тени для движения.

103
00:09:01,600 --> 00:09:06,220
Стационарные источники частично "запекают" свет.  

104
00:09:06,220 --> 00:09:10,690
Наиболее затратным в вычислениях является подвижный источник света.

105
00:09:10,720 --> 00:09:13,420
С ним полностью можно взаимодействовать во время игры.

106
00:09:13,420 --> 00:09:19,330
Что то вроде движущегося солнца, отбрасывающее динамические тени.

107
00:09:19,330 --> 00:09:23,830
"Запекать" что либо тут бессмысленно, так как источник света движется.

108
00:09:23,830 --> 00:09:32,350
Они самые затратные, поэтому используются экономно. Так же они очень гибки и динамичны во время игры. 

109
00:09:32,890 --> 00:09:35,830
Мне бы хотелось сделать оба наших солнца подвижными.

110
00:09:35,920 --> 00:09:41,500
Выделив направленный свет, изменим его режим на подвижный, затем выбрать 

111
00:09:41,500 --> 00:09:44,200
второй направленный свет и так изменю режим на подвижный.

112
00:09:44,350 --> 00:09:51,310
Так как они оба являются солнцами, назовем их Sun0 и Sun 1.

